# Noun-Verb Analysis
**Project:** MCE Platform
**Date:** 2025-12-28
**Purpose:** Identify potential classes/entities (Nouns) and their responsibilities/methods (Verbs) to refine the domain model.

## 1. Primary Entities (Nouns)

### **Lead**
*   **Description:** A potential customer or contact.
*   **Attributes:** `id`, `name`, `phone`, `email`, `source` (csv, sheet, whatsapp), `status` (new, contacted), `score` (int), `tags` (list), `stopped_automation` (bool).
*   **Verbs (Operations):**
    *   `Create`: Instantiate a new lead from a source.
    *   `UpdateStatus`: Change workflow stage (e.g., New -> Contacted).
    *   `UpdateScore`: Increment/decrement value based on interactions.
    *   `Deduplicate`: Check existence by phone number.
    *   `StopAutomation`: Flag to prevent bot replies (Kill Switch).

### **Message**
*   **Description:** An individual unit of communication via WhatsApp.
*   **Attributes:** `id`, `lead_id`, `content`, `direction` (inbound/outbound), `status` (sent, delivered, read), `timestamp`.
*   **Verbs (Operations):**
    *   `Send`: Dispatch content to the WhatsApp API.
    *   `Receive`: Ingest incoming content from the listener.
    *   `Sync`: Fetch historical messages from the provider.
    *   `Log`: Persist to database.

### **Campaign**
*   **Description:** A planned outreach sequence targeting a group of leads.
*   **Attributes:** `id`, `name`, `status` (draft, running), `target_filter`, `created_at`.
*   **Verbs (Operations):**
    *   `Create`: Define a new campaign structure.
    *   `AddStep`: Append a `CampaignStep` (Message or Delay).
    *   `Start`: different Initialize the audience and begin execution.
    *   `Pause`: Halt execution.

### **CampaignStep** (Component)
*   **Description:** A single action within a campaign.
*   **Attributes:** `id`, `campaign_id`, `type` (whatsapp, delay), `content`, `order`.
*   **Verbs (Operations):**
    *   `Execute`: Run the logic associated with the step type.

### **Workflow**
*   **Description:** An automated rule set triggered by events.
*   **Attributes:** `id`, `name`, `trigger_type`, `nodes` (json), `edges` (json), `active` (bool).
*   **Verbs (Operations):**
    *   `Evaluate`: Check if conditions are met.
    *   `Trigger`: Fire associated actions (e.g., Send Message).

### **GoogleSheet** (Source)
*   **Description:** An external configuration for lead ingestion.
*   **Attributes:** `url`, `last_sync_time`.
*   **Verbs (Operations):**
    *   `Poll`: Fetch latest rows.
    *   `Parse`: Convert rows to `Lead` objects.

## 2. Secondary Entities & Actors

### **Dashboard (View/Controller)**
*   **Verbs:** `aggregateStats` (count leads, messages), `displayFeed` (real-time updates).

### **WhatsAppService (System Actor)**
*   **Verbs:** `Connect`, `Disconnect`, `GenerateQR`, `Listen` (for events).

## 3. Interaction Matrix

| Subject | Verb | Object | Context |
| :--- | :--- | :--- | :--- |
| **System** | Imports | **Lead** | Bulk CSV or Sheet Poll |
| **Sales Rep** | Sends | **Message** | Direct Chat |
| **Campaign** | targets | **Segment** | Audience filtering |
| **Lead** | triggers | **Workflow** | On Creation or Status Change |
| **Workflow** | sends | **Message** | Auto-reply |
| **Lead** | replies | **Message** | Inbound WhatsApp |
| **System** | activates | **Kill Switch** | If Lead replies (Stop Automation) |

---
*Generated by Antigravity*
