# API Specification (Overview)
**Project:** MCE Platform
**Date:** 2025-12-28
**Base URL:** `http://localhost:5000/api`

## 1. Leads API

### `GET /leads`
Fetch a paginated list of leads.
*   **Query Params:** `page`, `limit`, `status`
*   **Response:** `[ { "id": "uuid", "name": "John", "phone": "123", ... } ]`

### `POST /leads/import`
Upload a CSV file for bulk import.
*   **Body (Multipart):** `file` (CSV)
*   **Response:** `{ "success": true, "stats": { "imported": 50, "skipped": 2 } }`

## 2. Messaging API

### `GET /leads/:id/messages`
Fetch chat history for a specific lead.
*   **Response:** `[ { "direction": "inbound", "content": "Hello", "timestamp": "..." } ]`

### `POST /leads/:id/messages`
Send a manual message.
*   **Body:** `{ "content": "Hello World", "direction": "outbound" }`
*   **Response:** `{ "success": true }`

## 3. Campaigns API

### `GET /campaigns`
List all campaigns.

### `POST /campaigns`
Create a new multi-step campaign.
*   **Body:**
    ```json
    {
      "name": "Welcome Series",
      "target_filter": "ALL",
      "steps": [
        { "type": "WHATSAPP", "content": "Welcome aboard!" },
        { "type": "DELAY", "content": "24" },
        { "type": "WHATSAPP", "content": "How are you finding things?" }
      ]
    }
    ```
*   **Response:** `{ "id": "uuid", "status": "DRAFT" }`

### `POST /campaigns/:id/start`
Start the campaign processing.
*   **Response:** `{ "success": true, "queued": 150 }`

## 4. Workflows API

### `GET /workflows`
List all automation workflows.

### `POST /workflows`
Save a visual workflow definition.
*   **Body:**
    ```json
    {
      "name": "New Lead Trigger",
      "nodes": [ { "id": "1", "type": "trigger", "position": { "x": 0, "y": 0 }, "data": {} } ],
      "edges": [ ... ]
    }
    ```

## 5. Analytics API

### `GET /analytics/whatsapp`
Fetch dashboard metrics.
*   **Response:**
    ```json
    {
      "sent": 120,
      "stopped": 5,
      "queue": 10,
      "recent_stops": [ ... ]
    }
    ```

---
*Generated by Antigravity*
